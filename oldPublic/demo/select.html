<!DOCTYPE html>
<html lang="en">
<head>
 <script type="text/javascript" src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" type="text/css" href="../css/common.css">
    <link rel="stylesheet" type="text/css" href="../css/form.css">
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <link rel="stylesheet" type="text/css" href="../css/box.css">
    <link rel="stylesheet" type="text/css" href="../css/list.css">
    <link rel="stylesheet" type="text/css" href="../css/goodsManage.css"/>
    <style>
        body { margin: 0; padding: 0; }
        pre {
            background-color: #303030;
            font-size: 13px;
            line-height: 19px;
            overflow: auto;
            padding: 6px 10px;
          }
        pre code {
            color: #f2f2f2;
            border: none;
            padding: 0;
            font-family: Monaco, "Bitstream Vera Sans Mono", "Lucida Console", Terminal;
            margin-bottom: 30px;
            font-size: 14px;
          }
    </style>
    <script src="http://cdn.bootcss.com/jquery/3.0.0-beta1/jquery.js"></script>
</head>
<body>
    <h2 class="lt-title add-goods-head">
        <div class="mtitle add-goods-page">select<span></span></div>
        <span class="refreshBtn"></span>
        <span class="configBtn"></span>

        <div class="handleWarning handleSuccess"></div>
    </h2>
    <div class="info">
        <ul>
            <li class="Goods-L1">
                <span class="ft-t-14 Goods-title">示例操作</span>
            </li>
        </ul>
    </div>
	<div id="slt1" class="text-oper select sel-W134">
        <span>请选择</span>
        <input type="hidden" name=""/>
        <i></i>
        <ul style="display: none;">
            <li v="长裙">长裙</li>
            <li v="短裙">短裙</li>
        </ul>
    </div>
    <div id="slt2" class="text-oper select sel-W134">
        <span>请选择</span>
        <input type="hidden" name="" value="短裙" />
        <i></i>
        <ul style="display: none;">
            <li v="长裙">长裙</li>
            <li v="短裙">短裙</li>
        </ul>
    </div>
    <div class="info">
        <ul>
            <li class="Goods-L1">
                <span class="ft-t-14 Goods-title">结构代码</span>
            </li>
        </ul>
        <pre>
            <code>
&lt;div id="slt1" class="text-oper select sel-W134"&gt;
    &lt;span>请选择&lt;/span&gt;
    &lt;input type="hidden" name=""&gt;
    &lt;i&gt;&lt;/i&gt;
    &lt;ul style="display: none;"&gt;
        &lt;li v="选中之后真实值"&gt;长裙&lt;/li&gt;
        &lt;li v="选中之后真实值"&gt;短裙&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;
            </code>
        </pre>
    </div>
    <div class="info">
        <ul>
            <li class="Goods-L1">
                <span class="ft-t-14 Goods-title">参数说明</span>
            </li>
        </ul>
        <p>调用方法如下：</p>
        <p>$().select();</p>
        <p>$().select({onlyShow: false, setValue: 2, vals: [
        {
            text: '一',
            value: '1'
        },
        {
            text: '二',
            value: '2'
        },
        {
            text: '三',
            value: '3'
        }
    ]});</p>
        <p>调用参数说明：</p>
        <p>onlyShow:下拉列表仅仅显示用，没有值变化功能，默认值为true，即仅仅显示。</p>
        <p>vals：列表填充的数值，形式如[
            {
                text: '一',
                value: '1'
            },
            {
                text: '二',
                value: '2'
            },
            {
                text: '三',
                value: '3'
            }
        ]，默认值[]。</p>
        <p>topShow:列表是否显示到上侧，为true显示上侧，默认值false。</p>
        <p>当没有结构时，会自动填充&lt;span&gt;&lt;/span&gt;&lt;input type="hidden" name=""&gt;&lt;i&gt;&lt;/i&gt;&lt;ul style="display: none;"&gt;&lt;/ul&gt;'结构到调用的元素中。</p>
        <p>setValue:给列表设置值。</p>
        <p>mouseoverShow:设置鼠标悬浮显示列表。为true时鼠标悬浮显示，默认值为false。</p>
    </div>
    <div class="info">
        <ul>
            <li class="Goods-L1">
                <span class="ft-t-14 Goods-title">方法说明</span>
            </li>
        </ul>
        <p>$().select('setValue', '8');这个方法给select设置值。</p>
        <p>$().select('getValue');这个方法获取select的值。</p>
    </div>
    <div class="info">
        <ul>
            <li class="Goods-L1">
                <span class="ft-t-14 Goods-title">事件说明</span>
            </li>
        </ul>
        <p>$().on('sltChange', function(event, val) {console.log(val.value);console.log(val.text)});</p>
        <p>如上所示，可以给select添加事件，当值改变就执行绑定的方法，方法的第一个参数是事件对象，第二个参数是变化后的值，值是对象形式，含有两个属性分别是text和value。</p>
    </div>
	<script src="../js/libs/seajs/sea-debug.js"></script>
    <script src="../js/base.js"></script>
    <script>
      appManager.use('select');
    </script>
    <!-- <script>
        $.fn.select = function(options) {
            var that = this;
            var _arg = arguments;
            var _default = {
                onlyShow: true,
                vals: [],
                topShow: false,
                mouseoverShow: false
            };

            var tmpl = '<span></span>'
                +'<input type="hidden" name="">'
                +'<i></i>'
                +'<ul style="display: none;"></ul>';

            var opt;
            if(typeof options == 'object') {
                opt = $.extend(true, _default, options);
            } else {
                opt = _default;
            }

            if(typeof options != 'string') {
                $(this).data('opt', opt).addClass('js_select');
            }

            if(opt && !opt.onlyShow) {
                if(opt && (typeof $(this).find('input:hidden').val() != 'undefined') && $(this).find('input:hidden').val() != '') {
                    opt.setValue = $(this).find('input:hidden').val();
                } else if(!opt && (typeof $(this).find('input:hidden').val() != 'undefined') && $(this).find('input:hidden').val() != '') {
                    options = 'setValue';
                    _arg[1] = arguments[1] = $(this).find('input:hidden').val();
                }
            }

            if(options == 'getValue') {
                return $(this).eq(0).find('>span').attr('v');
            }

            this.each(function(i, dom) {
                var $this = $(this);
                var $content;
                var html = '';

                if(!$this.html().replace(/\s+/, '')) {
                    $(this).html(tmpl);
                    $(this).addClass('text-oper select');
                }

                $content = $(this).find('ul');

                if(opt && opt.selectWidth) {
                    $this.css('width', opt.selectWidth);
                }

                if(opt && opt.autoWidth && opt.minWidth) {
                    $this.css({'width': 'auto', 'min-width': opt.minWidth});
                }

                if(opt && opt.topShow) {
                    $content.css({'bottom': $this.height(), 'border-top': 'inherit', 'border-bottom': '1px solid #fff', 'border-radius': $this.css('border-radius').split(' ').reverse().join(' ')});
                }

                $this.off('sltChange.select').on('sltChange.select', function(e, valObj) {
                    if(!$this.data('opt').onlyShow) {
                        $this.find('span').text(valObj.text);
                    }
                    $this.find('span').attr('v', valObj.value);
                    $this.find('input[type="hidden"]').val(valObj.value);
                });

                //设置value
                if(options == 'setValue') {
                    var _text;
                    var _val = _arg[1];

                    if(_val == '') {
                        _text = $(this).data('opt').defaultText || '请选择';
                    } else {
                        $content.find('li').each(function(i, dom) {
                            if($(this).attr('v') == _val) _text = $(this).text();
                        });
                    }
                    $this.trigger('sltChange', {text: _text, value: _val});

                    return;
                } else {
                    var _obj = {},
                        _text,
                        _val;

                    if($(this).find('ul li[selected]')[0]) {
                        _text = $(this).find('ul li[selected]').text();
                        _val = $(this).find('ul li[selected]').attr('v');
                        _obj.text = _text;
                        _obj.value = _val;

                        $this.trigger('sltChange', _obj);
                    }
                }

                (function() {
                    var _text,
                        _val;

                    _val = $this.find('input:hidden').val();
                    if(_val == '') {
                        _text = $this.data('opt').defaultText || '请选择';
                    } else {
                        $this.find('ul').find('li').each(function(i, dom) {
                            if($(this).attr('v') == _val) _text = $(this).text();
                        });
                    }
                    $this.trigger('sltChange', {text: _text, value: _val});
                })();

                if(opt && opt.vals.length) {
                    opt.vals.forEach(function(val) {
                        html += '<li v="'+ val.value +'">'+ val.text +'</li>'
                    });

                    $content.empty().html(html);
                }

                $this.off('mouseenter.select').on('mouseenter.select', function() {
                    $(this).addClass('sel');

                    if(opt && opt.mouseoverShow) {
                        $('.js_select').removeClass('sel').find('ul').hide();
                        $(this).addClass('sel');
                        $content.show();
                    }
                });

                $this.off('mouseleave.select').on('mouseleave.select', function() {
                    if(!$(this).find('ul').is(':visible')) $(this).removeClass('sel');

                    if(opt && opt.mouseoverShow) {
                        $('.js_select').removeClass('sel').find('ul').hide();
                        $(this).removeClass('sel');
                        $content.hide();
                    }
                });

                if(!opt || (opt && !opt.mouseoverShow)) {
                    $this.off('click.select').on('click.select', function(e) {
                        $('.js_select').removeClass('sel').find('ul').hide();
                        $(this).addClass('sel');
                        $content.show();

                        e.stopPropagation();
                    });
                }

                $content.off('click.clickSelect').on('click.clickSelect', 'li', function(e) {
                    var valObj = {};

                    valObj.text = $(this).text();
                    valObj.value = $(this).attr('v');

                    $content.hide();
                    $this.removeClass('sel');

                    $this.trigger('sltChange', valObj);

                    e.stopPropagation();
                });

                if(opt && (typeof opt.setValue != 'undefined')) {
                    var _text;
                    var _val = opt.setValue;

                    $content.find('li').each(function(i, dom) {
                        if($(this).attr('v') == _val) _text = $(this).text();
                    });
                    $this.trigger('sltChange', {text: _text, value: _val});
                }
            });

            if(opt && !opt.mouseoverShow) {
                $(document).off('click.closeSelect').on('click.closeSelect', function(e) {
                    if($(e.target).closest('.js_select').get(0) && !$(e.target).closest('.js_select').data('opt').mouseoverShow) {
                        that.removeClass('sel').find('ul').hide();
                        $('.js_select').removeClass('sel').find('ul').hide();
                    } else if(!$(e.target).closest('.js_select').get(0)) {
                        that.removeClass('sel').find('ul').hide();
                        $('.js_select').removeClass('sel').find('ul').hide();
                    }
                });
            }

            $(this).closest('form').off('reset.select').on('reset.select', function() {
                $(this).find('.js_select').each(function(i, dom) {
                    var _val;

                    _val = $(this).find('ul li[selected]').attr('v') || '';
                    $(this).select('setValue', _val);
                });
            });

            return this;
        };

        $('.select').select({onlyShow: false});
        //$('.select').select('setValue', '短裙');
        $('.select').select('setValue', '');
    </script> -->
    <script>
    $('p').each(function(i, dom) {
        var html = $(this).html();

        html = html.replace(/(^\w+[:：])/, '<span style="color: red; font-weight: bold;">$1</span>');
        html = html.replace(/(true|false|\[|\])/g, '<span style="color: #f59e0a; font-weight: bold;">$1</span>');
        html = html.replace(/([\u4e00-\u9fa5])([a-zA-Z-_$]+)/g, '$1<span style="color: green; font-weight: bold;">$2</span>');
        html = html.replace(/(，)([a-zA-Z-_$]+)/g, '$1<span style="color: green; font-weight: bold;">$2</span>');
        $(this).html(html);
    });
</script>
</body>
</html>